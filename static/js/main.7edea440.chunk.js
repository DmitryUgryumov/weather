(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{25:function(e,t,c){},32:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(17),i=c.n(n),r=c(20),l=c(4),d=(c(25),c(6)),j=c(2),o=c(0),h=function(e){var t=e.selectedCity,c=e.removeCity;return Object(o.jsx)("div",{className:"selected",children:t.length?Object(o.jsx)("ul",{className:"selected__ul",children:t.map((function(e){return Object(o.jsxs)("li",{className:"selected__li",children:[Object(o.jsx)(d.b,{className:"selected__link",to:"/search/city=".concat(e),children:e}),Object(o.jsx)("button",{className:"btn__remove",onClick:function(){return c(e)},children:"X"})]},e)}))}):Object(o.jsx)("p",{className:"selected__empty-value",children:"No selected cities"})})},b=s.a.createContext(),m=function(e){var t=Object(a.useContext)(b),c=t.addCity,s=t.selectedCity.includes(e.cityName),n="https://openweathermap.org/img/wn/".concat(e.icon,"@2x.png");return Object(o.jsx)("div",{className:"weather-card card",children:Object(o.jsxs)("div",{className:"card-container",children:[Object(o.jsxs)("div",{className:"card__location",children:[Object(o.jsx)("span",{children:"Weather for "}),Object(o.jsx)("span",{className:"card__city",children:e.cityName}),Object(o.jsxs)("span",{className:"card__country",children:[" (",e.countryName,")"]})]}),Object(o.jsx)("div",{className:"card__5-day",children:Object(o.jsx)(d.b,{to:"/weather/".concat(e.cityName,"/today+0day"),children:"Weather for 5 days"})}),Object(o.jsxs)("div",{className:"card__flex-container",children:[Object(o.jsx)("img",{className:"card__icon",src:n,alt:""}),Object(o.jsxs)("div",{className:"card__temp-container",children:[Object(o.jsxs)("p",{className:"card__temp",children:[Math.round(e.temp-273),"\xb0C"]}),Object(o.jsxs)("p",{className:"card__temp-feels-like",children:["Feels like: ",Math.round(e.feelsLike-273),"\xb0C"]})]})]}),Object(o.jsx)("p",{className:"card__description",children:e.weatherDescription}),Object(o.jsxs)("p",{className:"card__wind",children:["Wind: ",e.wind.toFixed(1),"m/s"]}),Object(o.jsx)("button",{className:"card__btn btn__add",disabled:s,onClick:function(){return c(e.cityName)},children:s?"city is selected":"select city"})]})})},u=function(e){var t=e.weatherRequest,c=e.setError,s=e.setCityInfo,n=e.setIsRequested,i=Object(a.useState)(""),r=Object(l.a)(i,2),d=r[0],h=r[1],b=Object(j.f)(),m=Object(j.g)().cityName;return Object(a.useEffect)((function(){var e=m.replace("city=","");h(e),e?t(e):(c(!1),n(!1),s(null))}),[m]),Object(o.jsx)("div",{className:"search",children:Object(o.jsxs)("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),""!==d&&b.push("/search/city=".concat(d))},children:[Object(o.jsx)("input",{className:"search__input",type:"text",placeholder:"Write city",value:d,onChange:function(e){return h(e.target.value)}}),Object(o.jsx)("button",{type:"submit",className:"search__btn",children:"search"})]})})},O=function(e){var t=e.apiKey,c=Object(a.useState)(!1),s=Object(l.a)(c,2),n=s[0],i=s[1],r=Object(a.useState)(!1),d=Object(l.a)(r,2),h=d[0],b=d[1],O=Object(a.useState)(!1),x=Object(l.a)(O,2),_=x[0],p=x[1],f=Object(a.useState)(null),N=Object(l.a)(f,2),y=N[0],v=N[1],w=Object(j.g)().cityName,g=Object(o.jsx)(u,{weatherRequest:function(e){var c="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&lang=en&appid=").concat(t);fetch(c).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){v(e),b(!0),i(!1),p(!0)})).catch((function(e){b(!0),i(e),p(!0)}))},error:n,setError:i,setIsLoaded:b,isLoaded:h,setCityInfo:v,setIsRequested:p});return y||_?n?Object(o.jsxs)("div",{className:"error",children:[g,Object(o.jsxs)("p",{className:"error__text",children:["Error: ",'"'.concat(w.replace("city=",""),'" ').concat(n)]})]}):h?Object(o.jsxs)(o.Fragment,{children:[g,Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(m,{cityName:y.name,countryName:y.sys.country,temp:y.main.temp,weatherDescription:y.weather[0].description,icon:y.weather[0].icon,wind:y.wind.speed,feelsLike:y.main.feels_like})})]}):Object(o.jsx)("div",{className:"loading",children:"Loading..."}):Object(o.jsx)("div",{children:g})},x=["London","New York","Paris","Moscow","Tokyo","Madrid","Beijing","Dubai","Singapore","Barcelona"],_=function(e){var t=e.apiKey,c=Object(a.useState)(null),s=Object(l.a)(c,2),n=s[0],i=s[1],r=Object(a.useState)(!1),d=Object(l.a)(r,2),j=d[0],h=d[1],b=Object(a.useState)(null),u=Object(l.a)(b,2),O=u[0],_=u[1];return Object(a.useEffect)((function(){var e=Math.floor(Math.random()*x.length);!function(e){var c="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&lang=en&appid=").concat(t);fetch(c).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){_(e),h(!0),i(!1)})).catch((function(e){h(!0),i(e)}))}(x[e])}),[]),n?Object(o.jsx)("div",{className:"error",children:Object(o.jsxs)("p",{children:["Error: ",n]})}):j?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"home-title",children:"Weather forecast"}),Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(m,{cityName:O.name,countryName:O.sys.country,temp:O.main.temp,weatherDescription:O.weather[0].description,icon:O.weather[0].icon,wind:O.wind.speed,feelsLike:O.main.feels_like})})]}):Object(o.jsx)("div",{className:"loading",children:"Loading..."})},p=function(e){var t=e.weatherList;return Object(o.jsx)("ul",{className:"weather__list",children:t.map((function(e){return Object(o.jsxs)("li",{className:"weather__list-item",children:[Object(o.jsx)("div",{className:"weather__list-info",children:e.dt_txt.slice(11,16)}),Object(o.jsxs)("div",{className:"weather__list-info weather__temp",children:[Math.round(e.main.temp-273),"\xb0C"]}),Object(o.jsx)("div",{className:"weather__list-info",children:Object(o.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),alt:""})}),Object(o.jsx)("div",{className:"weather__list-info",children:e.weather[0].description}),Object(o.jsxs)("div",{className:"weather__list-info",children:["Wind: ",e.wind.speed.toFixed(1),"m/s"]}),Object(o.jsx)("div",{className:"weather__list-info",children:Object(o.jsxs)("p",{children:["Feels like: ",Math.round(e.main.feels_like-273),"\xb0C"]})})]},e.dt)}))})},f=["January","February","March","April","May","June","July","August","September","October","November","December"],N=function(e){var t=e.apiKey,c=Object(a.useState)(!1),s=Object(l.a)(c,2),n=s[0],i=s[1],r=Object(a.useState)(!1),h=Object(l.a)(r,2),b=h[0],m=h[1],u=Object(a.useState)(null),O=Object(l.a)(u,2),x=O[0],_=O[1],N=Object(a.useState)([]),y=Object(l.a)(N,2),v=y[0],w=y[1],g=Object(j.h)(),S=g.path,k=g.url,C=Object(j.g)().cityName;return Object(a.useEffect)((function(){!function(e){var c="https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&lang=en&appid=").concat(t);fetch(c).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)})).then((function(e){_(e),w(e.list.map((function(e){return e.dt_txt.slice(5,10).split("-")})).filter((function(e,t,c){return 0===t||e[1]!==c[t-1][1]})).map((function(e){return{month:e[0],day:e[1]}}))),m(!0)})).catch((function(e){i(e),m(!0)}))}(C)}),[]),n?Object(o.jsx)("div",{className:"error",children:Object(o.jsxs)("p",{className:"error__text",children:["Error: ",'"'.concat(C,'" ').concat(n)]})}):b?Object(o.jsxs)("div",{className:"weather-item weather",children:[Object(o.jsx)("div",{className:"weather__title",children:Object(o.jsxs)("div",{className:"weather__location",children:[Object(o.jsx)("span",{className:"weather__city",children:x.city.name}),Object(o.jsxs)("span",{className:"weather__country",children:["(",x.city.country,")"]})]})}),Object(o.jsx)("nav",{className:"nav nav-weather",children:Object(o.jsx)("ul",{className:"nav__list",children:v.map((function(e,t){return Object(o.jsx)("li",{className:window.location.href.includes("+".concat(t))?"nav__item nav__item_active":"nav__item",children:Object(o.jsx)(d.b,{className:"nav__link",to:"".concat(k,"/today+").concat(t,"day"),children:e.day!==(new Date).getDate().toString()?"".concat(e.day," ").concat(f[e.month-1]):"Today"})},e.day)}))})}),Object(o.jsx)("div",{className:"weather__list-container",children:Object(o.jsx)(j.c,{children:v.map((function(e,t){return Object(o.jsx)(j.a,{path:"".concat(S,"/today+").concat(t,"day"),children:Object(o.jsx)(p,{cityInfo:x,monthNames:f,weatherList:x.list.filter((function(t){return t.dt_txt.slice(8,10)===e.day}))})},e.day)}))})})]}):Object(o.jsx)("div",{className:"loading",children:"Loading..."})},y="60881de5bfadd478bce737c02789308b";var v=function(){var e=Object(a.useState)(localStorage.getItem("selectedCity")?JSON.parse(localStorage.getItem("selectedCity")):[]),t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){localStorage.setItem("selectedCity",JSON.stringify(c))}),[c]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("nav",{className:"nav",children:Object(o.jsxs)("ul",{className:"nav__list",children:[Object(o.jsx)("li",{className:"nav__item",children:Object(o.jsx)(d.b,{className:"nav__link",to:"/search/city=",children:"Search"})}),Object(o.jsx)("li",{className:"nav__item",children:Object(o.jsx)(d.b,{className:"nav__link",to:"/selected",children:"Selected cities"})})]})}),Object(o.jsx)(b.Provider,{value:{addCity:function(e){c.includes(e)||s((function(t){return[].concat(Object(r.a)(t),[e])}))},selectedCity:c},children:Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{exact:!0,path:"/",children:Object(o.jsx)(_,{apiKey:y})}),Object(o.jsx)(j.a,{path:"/search/:cityName",children:Object(o.jsx)(O,{apiKey:y})}),Object(o.jsx)(j.a,{path:"/selected",children:Object(o.jsx)(h,{selectedCity:c,removeCity:function(e){return s((function(t){return t.filter((function(t){return t!==e}))}))}})}),Object(o.jsx)(j.a,{path:"/weather/:cityName",children:Object(o.jsx)(N,{apiKey:y})})]})})]})};i.a.render(Object(o.jsx)(d.a,{basename:"/",children:Object(o.jsx)(v,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.7edea440.chunk.js.map